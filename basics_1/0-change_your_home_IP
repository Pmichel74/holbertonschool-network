#!/usr/bin/env bash
# This script configures an Ubuntu server to resolve localhost to 127.0.0.2 and facebook.com to 8.8.8.8.

# Backup the current /etc/hosts file
sudo cp /etc/hosts /etc/hosts.bak

# Create a temporary file for modifications
tmp_hosts=$(mktemp)

# Remove any existing localhost entry to avoid duplicates
sudo grep -v '\slocalhost$' /etc/hosts > "$tmp_hosts"

# Add the new configurations
echo "127.0.0.2 localhost" | sudo tee -a "$tmp_hosts" > /dev/null
echo "8.8.8.8 facebook.com" | sudo tee -a "$tmp_hosts" > /dev/null

# Replace the original /etc/hosts file with the modified one
sudo mv "$tmp_hosts" /etc/hosts

# Set appropriate permissions
sudo chmod 644 /etc/hosts

echo "Configuration updated. Remember to revert localhost to 127.0.0.1 if needed."
